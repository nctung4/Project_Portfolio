<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Project 1: Car Price Prediction | Cong T. Nguyen</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Car price prediction using regression models.">
    <meta name="generator" content="Hugo 0.83.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="https://nctung4.github.io/Project_Portfolio/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      
<link rel="shortcut icon" href="https://nctung4.github.io/Project_Portfolio/images/stat_favicon.png" type="image/x-icon" />


    

    
    
    <meta property="og:title" content="Project 1: Car Price Prediction" />
<meta property="og:description" content="Car price prediction using regression models." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nctung4.github.io/Project_Portfolio/post/project-3/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-05-16T11:00:59-04:00" />
<meta property="article:modified_time" content="2021-05-16T11:00:59-04:00" /><meta property="og:site_name" content="Cong T. Nguyen" />

<meta itemprop="name" content="Project 1: Car Price Prediction">
<meta itemprop="description" content="Car price prediction using regression models."><meta itemprop="datePublished" content="2021-05-16T11:00:59-04:00" />
<meta itemprop="dateModified" content="2021-05-16T11:00:59-04:00" />
<meta itemprop="wordCount" content="1053">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Project 1: Car Price Prediction"/>
<meta name="twitter:description" content="Car price prediction using regression models."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://nctung4.github.io/Project_Portfolio/images/car_price_pred/carprice.png');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://nctung4.github.io/Project_Portfolio/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Cong T. Nguyen
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://nctung4.github.io/Project_Portfolio/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://nctung4.github.io/Project_Portfolio/post/" title="Projects page">
              Projects
            </a>
          </li>
          
        </ul>
      
      







<a href="https://www.linkedin.com/in/tung-nguyen4/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/nctung4" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Project 1: Car Price Prediction</h1>
          
            <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              Car price prediction using regression models.
            </h2>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      





      <h1 class="f1 athelas mt3 mb1">Project 1: Car Price Prediction</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2021-05-16T11:00:59-04:00">May 16, 2021</time>

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><a href="https://github.com/nctung4/Car_Price_Prediction">Link to GitHub repository.</a></p>
<h1 id="car-price-prediction">Car Price Prediction</h1>
<p>This project is a end-to-end data science project, from data collecting, to making it into production.</p>
<h3 id="project-overview">Project Overview</h3>
<ul>
<li>Created a tool that estimates car prices (RMSE:~293K, MAE:~293K HUF) to help people negotiate or estimate the specific price, when they want to either buy or sell a car.</li>
<li>Used web scraping techniques to get the data from <a href="https://www.hasznaltauto.hu/">hasznaltauto.hu</a>. (hungarian car trading website)</li>
<li>Applied several data cleaning and feature engineering techniques, such as handling missing data or feature scaling</li>
<li>Optimized multiple linear regression, support vector regression, random forest regression, and xgboost.</li>
<li>Build a client facing API using flask, and deployed it using heroku (PAAS): <a href="https://nctung-car-price-pred.herokuapp.com/">https://nctung-car-price-pred.herokuapp.com/</a></li>
</ul>
<h3 id="resources-used">Resources used</h3>
<p><strong>Python Version:</strong> 3.8.5<br>
<strong>Packages:</strong> pandas, numpy, seaborn, matplotlib, sickit-learn, xgboost, selenium, beautifulsoup4, Flask, gunicorn, requests<br>
<strong>Requirements:</strong> <code>pip install -r requirements.txt</code></p>
<h3 id="table-of-contents">Table of contents:</h3>
<ol>
<li><a href="#project-motivation">Project Motivation</a></li>
<li><a href="#technical-aspects">Technical Aspects</a></li>
<li><a href="major-insights">Major Insights</a>
<ul>
<li>3.1 <a href="#web-scraping">Web scraping</a></li>
<li>3.2 <a href="#data-preparation">Data preparation</a></li>
<li>3.3 <a href="#eda">EDA</a></li>
<li>3.4 <a href="#model-building">Model building</a></li>
<li>3.5 <a href="#flask-deployment">Flask Deployment</a></li>
</ul>
</li>
<li><a href="#credits">Credits</a></li>
</ol>
<h3 id="project-motivation">Project Motivation</h3>
<p>I am not a car expert, and I always wondered how much my car would worth at the moment, if I suddenly decide to sell it. Then this idea hit me from nowhere. Why not build a model which help me figure out this information? I am a beginner in web scraping, it was quite hard at the beginning, but after a few readings, I managed to get the data I need from the biggest car trading website in my country. In the website I set a filtering for age and price. I searched for cars based on my specific preferences. Their price was maximum 3.5M HUF, and year ranges from 2011 to 2019. Unfortunately, my dataset is very small, due to the fact that my computer does not have the computing capacity, to run the code through a whole night. I scraped the data from the first 50 pages. I was also curious about how should a model like this be deployed. One of the most popular solution for that, is by a flask web application. I decided to create it as well, and host it in a PAAS service.</p>
<h3 id="technical-aspects">Technical Aspects</h3>
<ul>
<li>I scraped the data using the <strong>selenium</strong> and <strong>beautifulsoup</strong> libraries.</li>
<li>I cleaned the data using <strong>pandas</strong>.</li>
<li>I used several visualization techniques, to perform EDA.</li>
<li>In the model building part I optimized 4 models. <strong>Linear Regression</strong>, <strong>SVR</strong>, <strong>Random Forest Regression</strong>, and <strong>XGBoost</strong>.</li>
<li>Build a client facing API using <strong>Flask</strong>, and deployed it in <strong>heroku</strong>.</li>
</ul>
<h3 id="major-insights">Major Insights</h3>
<p>In this section, I want to show the major insights of this project, from collecting the data, to deploying it.</p>
<h4 id="web-scraping">Web scraping</h4>
<p>In the website, 1 car information looks like this:</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/web_scrape_page.png"/>
</figure>

<p>I collected 350 cars data, looped through 50 pages. I managed to make the looping by changing the URL query parameters. I used the dictionary data structure to collect these data, and after 1 car I appended the dict into a list.</p>
<h4 id="data-preparation">Data preparation</h4>
<p>Several data cleaning procedures was applied in this phase, such as parsing the data to the right type, or getting the essential information within 1 cell.</p>
<p>The notebook for this section can be found <a href="https://github.com/nctung4/Car_Price_Prediction/blob/main/1_Data_preparation.ipynb">here</a>.</p>
<h4 id="eda">EDA</h4>
<p>In this section the main goal is to summarize the variables main characteristics. One of the most important thing to check at first, is the distribution of the numerical variables, and the relationship with the other variables through a scatter plot.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/pairplot.png"/>
</figure>

<p>We can see that most of the variables are either normally distributed, or have a right skewed distribution.</p>
<p>The next thing I wanted to check, is the correaltion with each other.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/corr_plot.png"/>
</figure>

<p>We can see that the weight variables have at least a moderate correlation with the other variables, we might need to exclude this from the modeling part, to avoid multicollinearity.</p>
<p>One of the simplest way to check the categorical variable characteristics, is to apply bar chart.</p>
<p>There are several imbalance variables in the dataset, such as the document, which should be excluded in the modeling part.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/docment_bar.png"/>
</figure>

<p>I also checked that what kind of manufacturers are available in this specific price range.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/manufacturer.png"/>
</figure>

<p>For more information check the <a href="https://github.com/nctung4/Car_Price_Prediction/blob/main/2_EDA.ipynb">notebook</a>.</p>
<h4 id="model-building">Model building</h4>
<p>In the model building part I tried 4 models.</p>
<p>Evaluation summary table:</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/eval.png"/>
</figure>

<p>The Linear Regression had the best performance, with an approximately 70% adjusted R^2.</p>
<p>In case of linear regression, it is essential after the modeling, to check whether the 5 assumptions are met in our case. The 5 assumptions are:</p>
<ol>
<li>Linear relationship</li>
<li>Normality</li>
<li>No or little multicollinearity</li>
<li>No auto-correlation</li>
<li>Homoscedasticity</li>
</ol>
<p><strong>Linear relationship:</strong></p>
<p>In this case, between the target and the feature variables, there should be a linear relationship. We can check that if the actual and the predicted values follow a diagonal line.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/linearitycheck.png"/>
</figure>

<p>In our case this assumption is satisfied.</p>
<p><strong>Normality of the error terms:</strong></p>
<p>The error term should follow a normal distribution. We can use statistical tests, such as the Anderson-Darling test, to check for normal distribution. If the p&lt;=0.05 (we reject the null hypothesis), then the distribution is non-normal. In our case this assumption is also satisfied.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/normality.png"/>
</figure>

<p><strong>Multicollinearity:</strong></p>
<p>With the VIF indicators, we can check whether in the specific variable multicollinearity may be present or not. If the VIF is greater than 10, then multicollinearity might be present. Unfortunately, this assumption is not satisfied in that case. However, it was not surprising, because we have a lot of dummy variables, and in that case, multicollinearity cannot be avoided.</p>
<p><strong>No auto-correlation in the error terms:</strong></p>
<p>Durbin-Watson Test shows if there is a autocorrelation in the data.
Values of 1.5 &lt; d &lt; 2.5 generally show that there is no autocorrelation in the data.</p>
<p>In our case the Durbin-Watson value is 1.93, so this assumption is satisfied as well.</p>
<p><strong>Homoscedasticity:</strong></p>
<p>It basically means that the error terms should have the same variance in each case. So the variance should be constant.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/homoscedasticiy.png"/>
</figure>

<p>We can say that in our case this assumption is also satisfied, so we can use the linear regression model, to predict the car price.</p>
<h4 id="flask-deployment">Flask Deployment</h4>
<p>I created a flask web application, where the user have to fill in the specific data, and after pressing the calculate button, the estimated car price will be displayed below the button.</p>
<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/frontend_app.png"/>
</figure>

<figure><img src="https://nctung4.github.io/Project_Portfolio/images/car_price_pred/pred_app.png"/>
</figure>

<p>I deployed this application in heroku, it is available here: <a href="https://nctung-car-price-pred.herokuapp.com/">https://nctung-car-price-pred.herokuapp.com/</a></p>
<h3 id="credits">Credits:</h3>
<ul>
<li><a href="https://medium.com/swlh/web-scrapping-healthcare-professionals-information-1372385d639d">https://medium.com/swlh/web-scrapping-healthcare-professionals-information-1372385d639d</a></li>
<li><a href="https://towardsdatascience.com/selenium-tutorial-scraping-glassdoor-com-in-10-minutes-3d0915c6d905">https://towardsdatascience.com/selenium-tutorial-scraping-glassdoor-com-in-10-minutes-3d0915c6d905</a></li>
<li><a href="https://stackabuse.com/deploying-a-flask-application-to-heroku/">https://stackabuse.com/deploying-a-flask-application-to-heroku/</a></li>
<li><a href="https://jeffmacaluso.github.io/post/LinearRegressionAssumptions/">https://jeffmacaluso.github.io/post/LinearRegressionAssumptions/</a></li>
<li><a href="https://machinelearningmastery.com/hyperparameter-optimization-with-random-search-and-grid-search/">https://machinelearningmastery.com/hyperparameter-optimization-with-random-search-and-grid-search/</a></li>
<li>Also grateful to <a href="https://www.linkedin.com/in/kenjee/">Ken Jee</a> and <a href="https://www.linkedin.com/in/naikkrish/?originalSubdomain=in">Krish Naik</a> for showing me how to create an end-to-end project</li>
</ul>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://nctung4.github.io/Project_Portfolio/" >
    &copy;  Cong T. Nguyen 2021 
  </a>
    <div>







<a href="https://www.linkedin.com/in/tung-nguyen4/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/nctung4" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

  </body>
</html>
